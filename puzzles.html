<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Puzzle - Siena Lane</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cream: #F5F1E8;
            --sage-dark: #6B8E7F;
            --sage-light: #A8C5B3;
            --sage-very-light: #D4E5DC;
            --blush: #E8D4D0;
            --lavender: #D9D0E8;
            --dark-text: #3D3D3D;
            --accent-gold: #C9A961;
            --bg-primary: #F5F1E8;
            --bg-secondary: #FFFFFF;
            --text-primary: #3D3D3D;
            --text-secondary: #6B8E7F;
            --card-bg: #FFFFFF;
            --shadow-color: rgba(107, 142, 127, 0.1);
            --cell-bg: #FFFFFF;
            --cell-given-bg: #D4E5DC;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --cream: #1a1a1a;
                --sage-dark: #8BA89C;
                --sage-light: #6B8E7F;
                --sage-very-light: #2a3a35;
                --blush: #3a2f2e;
                --lavender: #332f3a;
                --dark-text: #e0e0e0;
                --accent-gold: #D4AF6A;
                --bg-primary: #1a1a1a;
                --bg-secondary: #242424;
                --text-primary: #e0e0e0;
                --text-secondary: #a8c5b3;
                --card-bg: #2a2a2a;
                --shadow-color: rgba(0, 0, 0, 0.3);
                --cell-bg: #2a2a2a;
                --cell-given-bg: #2a3a35;
            }
        }

        html {
            scroll-behavior: smooth;
            background: var(--bg-primary);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
        }

        .navbar {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, var(--sage-dark) 0%, var(--sage-light) 100%);
            box-shadow: 0 4px 15px rgba(107, 142, 127, 0.1);
            z-index: 1000;
            padding: 1.2rem 0;
        }

        .navbar-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--cream);
            letter-spacing: -0.5px;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            gap: 2.5rem;
            align-items: center;
        }

        .nav-link {
            color: var(--cream);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-gold);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }

        .puzzle-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .puzzle-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .puzzle-header h1 {
            font-size: 2.5rem;
            color: var(--sage-dark);
            margin-bottom: 0.5rem;
        }

        .puzzle-date {
            font-size: 1.1rem;
            color: var(--dark-text);
            opacity: 0.8;
        }

        .puzzle-type {
            display: inline-block;
            background: var(--sage-light);
            color: var(--cream);
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 1rem;
        }

        .puzzle-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 5px 20px var(--shadow-color);
            margin-bottom: 2rem;
        }

        /* Sudoku Styles */
        .sudoku-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 2px;
            background: var(--sage-dark);
            border: 3px solid var(--sage-dark);
            max-width: 450px;
            margin: 0 auto;
            aspect-ratio: 1;
        }

        .sudoku-cell {
            aspect-ratio: 1;
            background: var(--cell-bg);
            border: 1px solid var(--sage-very-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: background 0.2s;
        }

        .sudoku-cell:hover:not(.given) {
            background: var(--sage-very-light);
        }

        .sudoku-cell.given {
            background: var(--cell-given-bg);
            color: var(--sage-dark);
            cursor: default;
        }

        .sudoku-cell input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            background: transparent;
            outline: none;
            color: var(--dark-text);
            padding: 0;
        }

        .sudoku-cell.pencil-mode {
            font-size: 0.7rem;
            padding: 2px;
            line-height: 1.1;
        }

        .sudoku-cell .pencil-marks {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            width: 100%;
            height: 100%;
            font-size: 0.65rem;
            font-weight: 500;
            color: #666;
        }

        .pencil-mark {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .toggle-btn {
            padding: 0.5rem 1.5rem;
            border: 2px solid var(--sage-dark);
            background: white;
            color: var(--sage-dark);
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-btn.active {
            background: var(--sage-dark);
            color: white;
        }

        .toggle-btn:hover {
            transform: translateY(-2px);
        }

        .number-pad {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
            max-width: 450px;
            margin: 1.5rem auto;
            padding: 1rem;
            background: var(--sage-very-light);
            border-radius: 12px;
        }

        .number-btn {
            aspect-ratio: 1;
            border: 2px solid var(--sage-dark);
            background: var(--cell-bg);
            color: var(--sage-dark);
            border-radius: 8px;
            font-size: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .number-btn:hover {
            background: var(--sage-light);
            color: white;
            transform: scale(1.05);
        }

        .number-btn:active {
            transform: scale(0.95);
        }

        .number-btn.clear {
            background: #d32f2f;
            color: white;
            border-color: #d32f2f;
            font-size: 1.2rem;
        }

        .number-btn.clear:hover {
            background: #b71c1c;
        }

        .sudoku-cell.selected {
            background: var(--accent-gold) !important;
            box-shadow: 0 0 0 3px var(--accent-gold);
        }

        /* Word Search Styles */
        .word-search-grid {
            display: grid;
            gap: 4px;
            max-width: 500px;
            margin: 0 auto 2rem;
            background: var(--sage-very-light);
            padding: 1rem;
            border-radius: 8px;
        }

        .word-search-cell {
            aspect-ratio: 1;
            background: var(--cell-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .word-search-cell:hover {
            background: var(--sage-very-light);
        }

        .word-search-cell.selected {
            background: var(--sage-light);
            color: white;
        }

        .word-search-cell.found {
            background: var(--accent-gold);
            color: white;
        }

        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .word-item {
            padding: 0.5rem 1rem;
            background: var(--sage-very-light);
            border-radius: 8px;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s;
        }

        .word-item.found {
            background: var(--accent-gold);
            color: white;
            text-decoration: line-through;
        }

        /* Crossword Styles */
        .crossword-grid {
            display: grid;
            gap: 2px;
            max-width: 400px;
            margin: 0 auto 2rem;
            background: var(--dark-text);
            padding: 2px;
        }

        .crossword-cell {
            aspect-ratio: 1;
            background: var(--cell-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: 600;
            position: relative;
            cursor: pointer;
        }

        .crossword-cell.black {
            background: var(--text-primary);
            cursor: default;
        }

        .crossword-cell input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 1.3rem;
            font-weight: 600;
            text-transform: uppercase;
            outline: none;
        }

        .cell-number {
            position: absolute;
            top: 2px;
            left: 3px;
            font-size: 0.6rem;
            color: var(--dark-text);
        }

        .clues {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .clue-section h3 {
            color: var(--sage-dark);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .clue-list {
            list-style: none;
        }

        .clue-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--sage-very-light);
        }

        .puzzle-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--sage-dark);
            color: white;
        }

        .btn-primary:hover {
            background: var(--sage-light);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: var(--sage-dark);
            border: 2px solid var(--sage-dark);
        }

        .btn-secondary:hover {
            background: var(--sage-very-light);
        }

        .success-message {
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--sage-light), var(--sage-dark));
            color: white;
            border-radius: 12px;
            margin-top: 2rem;
            font-size: 1.2rem;
            font-weight: 600;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .footer {
            background: var(--sage-dark);
            color: var(--cream);
            text-align: center;
            padding: 2rem;
            font-size: 0.95rem;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            .navbar-container {
                padding: 0 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .nav-menu {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .nav-link {
                font-size: 0.85rem;
            }

            .puzzle-container {
                padding: 2rem 1rem;
            }

            .puzzle-header h1 {
                font-size: 2rem;
            }

            .puzzle-content {
                padding: 1.5rem;
            }

            .sudoku-cell {
                font-size: 1.2rem;
            }

            .sudoku-cell input {
                font-size: 1.2rem;
            }

            .sudoku-cell .pencil-marks {
                font-size: 0.55rem;
            }

            .mode-toggle {
                flex-direction: column;
                gap: 0.75rem;
            }

            .toggle-btn {
                width: 100%;
                max-width: 200px;
            }

            .number-pad {
                gap: 0.4rem;
                padding: 0.75rem;
            }

            .number-btn {
                font-size: 1.3rem;
            }

            .number-btn.clear {
                font-size: 1rem;
            }

            .word-search-cell {
                font-size: 1rem;
            }

            .clues {
                grid-template-columns: 1fr;
            }

            .puzzle-controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .navbar {
                padding: 0.8rem 0;
            }

            .navbar-container {
                padding: 0 0.75rem;
            }

            .logo {
                font-size: 1.3rem;
            }

            .nav-menu {
                gap: 0.75rem;
            }

            .nav-link {
                font-size: 0.8rem;
            }

            .puzzle-header h1 {
                font-size: 1.6rem;
            }

            .puzzle-date {
                font-size: 1rem;
            }

            .sudoku-grid {
                max-width: 320px;
            }

            .sudoku-cell {
                font-size: 1rem;
            }

            .sudoku-cell input {
                font-size: 1rem;
            }

            .sudoku-cell .pencil-marks {
                font-size: 0.5rem;
            }

            .number-pad {
                gap: 0.3rem;
                padding: 0.5rem;
            }

            .number-btn {
                font-size: 1.1rem;
            }

            .number-btn.clear {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="logo">SienaLane</a>
            <nav class="nav-menu">
                <a href="index.html#about" class="nav-link">About</a>
                <a href="index.html#portfolio" class="nav-link">Portfolio</a>
                <a href="puzzles.html" class="nav-link active">Daily Puzzle</a>
                <a href="colors.html" class="nav-link">Color Generator</a>
                <a href="carr-quizzes.html" class="nav-link">Wine Quizzes</a>
                <a href="index.html#contact" class="nav-link">Contact</a>
            </nav>
        </div>
    </header>

    <div class="puzzle-container">
        <div class="puzzle-header">
            <h1>Daily Puzzle</h1>
            <p class="puzzle-date" id="puzzle-date"></p>
            <span class="puzzle-type" id="puzzle-type"></span>
        </div>

        <div class="puzzle-content" id="puzzle-content">
            <!-- Puzzle will be loaded here -->
        </div>

        <div class="success-message" id="success-message">
            üéâ Congratulations! You solved today's puzzle! üéâ
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2026 SienaLane. All rights reserved. | Digital Marketing Specialist</p>
    </footer>

    <script>
        // Daily puzzle rotation based on day of year
        function getDayOfYear() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            return Math.floor(diff / oneDay);
        }

        function formatDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return new Date().toLocaleDateString('en-US', options);
        }

        // Puzzle database
        const puzzles = [
            // Sudoku puzzles (days 0, 5, 10, 15...)
            {
                type: 'Sudoku',
                difficulty: 'Easy',
                grid: [
                    [5,3,0,0,7,0,0,0,0],
                    [6,0,0,1,9,5,0,0,0],
                    [0,9,8,0,0,0,0,6,0],
                    [8,0,0,0,6,0,0,0,3],
                    [4,0,0,8,0,3,0,0,1],
                    [7,0,0,0,2,0,0,0,6],
                    [0,6,0,0,0,0,2,8,0],
                    [0,0,0,4,1,9,0,0,5],
                    [0,0,0,0,8,0,0,7,9]
                ],
                solution: [
                    [5,3,4,6,7,8,9,1,2],
                    [6,7,2,1,9,5,3,4,8],
                    [1,9,8,3,4,2,5,6,7],
                    [8,5,9,7,6,1,4,2,3],
                    [4,2,6,8,5,3,7,9,1],
                    [7,1,3,9,2,4,8,5,6],
                    [9,6,1,5,3,7,2,8,4],
                    [2,8,7,4,1,9,6,3,5],
                    [3,4,5,2,8,6,1,7,9]
                ]
            },
            // Word Search puzzle
            {
                type: 'Word Search',
                difficulty: 'Medium',
                grid: [
                    ['M','A','R','K','E','T','I','N','G','P'],
                    ['E','S','O','C','I','A','L','X','Q','R'],
                    ['D','T','B','R','A','N','D','W','Z','O'],
                    ['I','R','R','E','A','C','H','Y','V','M'],
                    ['A','A','S','T','R','A','T','E','G','Y'],
                    ['L','T','K','L','E','A','D','S','U','T'],
                    ['C','E','G','N','O','I','T','A','C','E'],
                    ['O','G','R','O','W','T','H','P','D','N'],
                    ['N','Y','A','N','A','L','Y','T','I','C'],
                    ['T','M','E','T','R','I','C','S','F','S']
                ],
                words: ['MARKETING', 'SOCIAL', 'BRAND', 'STRATEGY', 'MEDIA', 'GROWTH', 'LEADS', 'CONTENT', 'ANALYTIC', 'METRICS', 'REACH']
            },
            // Mini Crossword
            {
                type: 'Mini Crossword',
                difficulty: 'Easy',
                grid: [
                    ['B','R','A','N','D'],
                    ['L','','A','','A'],
                    ['O','P','T','I','N'],
                    ['G','','A','','A'],
                    ['S','H','A','R','E']
                ],
                clues: {
                    across: [
                        '1. Company identity (5)',
                        '3. Email subscription (5)',
                        '5. Social media action (5)'
                    ],
                    down: [
                        '1. Online journal (4)',
                        '2. Marketing information (4)',
                        '3. Advertisement (2)'
                    ]
                }
            },
            // Another Sudoku
            {
                type: 'Sudoku',
                difficulty: 'Medium',
                grid: [
                    [0,0,0,2,6,0,7,0,1],
                    [6,8,0,0,7,0,0,9,0],
                    [1,9,0,0,0,4,5,0,0],
                    [8,2,0,1,0,0,0,4,0],
                    [0,0,4,6,0,2,9,0,0],
                    [0,5,0,0,0,3,0,2,8],
                    [0,0,9,3,0,0,0,7,4],
                    [0,4,0,0,5,0,0,3,6],
                    [7,0,3,0,1,8,0,0,0]
                ],
                solution: [
                    [4,3,5,2,6,9,7,8,1],
                    [6,8,2,5,7,1,4,9,3],
                    [1,9,7,8,3,4,5,6,2],
                    [8,2,6,1,9,5,3,4,7],
                    [3,7,4,6,8,2,9,1,5],
                    [9,5,1,7,4,3,6,2,8],
                    [5,1,9,3,2,6,8,7,4],
                    [2,4,8,9,5,7,1,3,6],
                    [7,6,3,4,1,8,2,5,9]
                ]
            },
            // Another Word Search
            {
                type: 'Word Search',
                difficulty: 'Easy',
                grid: [
                    ['E','M','A','I','L','T','R','E','N','D'],
                    ['C','A','M','P','A','I','G','N','O','S'],
                    ['L','I','N','K','S','H','A','R','E','T'],
                    ['I','M','P','A','C','T','W','E','B','A'],
                    ['C','O','N','V','E','R','T','N','O','T'],
                    ['K','N','T','E','N','G','A','G','E','S'],
                    ['S','T','E','N','T','O','P','E','N','D'],
                    ['V','I','R','A','L','N','T','A','R','A'],
                    ['T','R','A','F','F','I','C','L','E','T'],
                    ['M','E','T','R','I','C','S','E','N','A']
                ],
                words: ['EMAIL', 'CAMPAIGN', 'CLICK', 'VIRAL', 'CONVERT', 'TRAFFIC', 'ENGAGE', 'CONTENT', 'METRICS', 'TREND', 'STATS']
            }
        ];

        // Select puzzle based on day
        const dayOfYear = getDayOfYear();
        const puzzleIndex = dayOfYear % puzzles.length;
        const todaysPuzzle = puzzles[puzzleIndex];

        // Display puzzle
        document.getElementById('puzzle-date').textContent = formatDate();
        document.getElementById('puzzle-type').textContent = `${todaysPuzzle.type} - ${todaysPuzzle.difficulty}`;

        // Render puzzle based on type
        function renderPuzzle() {
            const content = document.getElementById('puzzle-content');

            if (todaysPuzzle.type === 'Sudoku') {
                renderSudoku(content, todaysPuzzle);
            } else if (todaysPuzzle.type === 'Word Search') {
                renderWordSearch(content, todaysPuzzle);
            } else if (todaysPuzzle.type === 'Mini Crossword') {
                renderCrossword(content, todaysPuzzle);
            }
        }

        let isPencilMode = false;
        let selectedCell = null;

        function renderSudoku(container, puzzle) {
            let html = '<div class="mode-toggle">';
            html += '<button class="toggle-btn active" id="normal-mode-btn" onclick="toggleMode(false)">‚úèÔ∏è Normal</button>';
            html += '<button class="toggle-btn" id="pencil-mode-btn" onclick="toggleMode(true)">üìù Pencil</button>';
            html += '</div>';
            html += '<div class="sudoku-grid">';

            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    const value = puzzle.grid[i][j];
                    if (value !== 0) {
                        html += `<div class="sudoku-cell given" data-row="${i}" data-col="${j}">${value}</div>`;
                    } else {
                        html += `<div class="sudoku-cell" data-row="${i}" data-col="${j}" data-pencil=""></div>`;
                    }
                }
            }

            html += '</div>';

            // Number pad
            html += '<div class="number-pad">';
            for (let i = 1; i <= 9; i++) {
                html += `<button class="number-btn" onclick="enterNumber(${i})">${i}</button>`;
            }
            html += '<button class="number-btn clear" onclick="clearCell()">Clear</button>';
            html += '</div>';

            html += '<div class="puzzle-controls">';
            html += '<button class="btn btn-primary" onclick="checkSudoku()">Check Solution</button>';
            html += '<button class="btn btn-secondary" onclick="resetPuzzle()">Reset</button>';
            html += '</div>';

            container.innerHTML = html;

            // Add click handlers to cells
            document.querySelectorAll('.sudoku-cell:not(.given)').forEach(cell => {
                cell.addEventListener('click', function() {
                    selectCell(this);
                });
            });
        }

        function toggleMode(pencilMode) {
            isPencilMode = pencilMode;
            document.getElementById('normal-mode-btn').classList.toggle('active', !pencilMode);
            document.getElementById('pencil-mode-btn').classList.toggle('active', pencilMode);
        }

        function selectCell(cell) {
            if (cell.classList.contains('given')) return;

            // Remove previous selection
            if (selectedCell) {
                selectedCell.classList.remove('selected');
            }

            // Select new cell
            selectedCell = cell;
            cell.classList.add('selected');
        }

        function enterNumber(number) {
            if (!selectedCell) {
                alert('Please select a cell first!');
                return;
            }

            if (isPencilMode) {
                // Pencil mode - toggle number in pencil marks
                const currentPencil = selectedCell.dataset.pencil || '';
                let marks = currentPencil.split('');

                if (marks.includes(number.toString())) {
                    // Remove if already present
                    marks = marks.filter(n => n !== number.toString());
                } else {
                    // Add number
                    marks.push(number.toString());
                }

                marks = marks.sort().join('');
                selectedCell.dataset.pencil = marks;

                if (marks) {
                    let html = '<div class="pencil-marks">';
                    for (let i = 1; i <= 9; i++) {
                        html += `<div class="pencil-mark">${marks.includes(i.toString()) ? i : ''}</div>`;
                    }
                    html += '</div>';
                    selectedCell.innerHTML = html;
                    selectedCell.classList.add('pencil-mode');
                } else {
                    selectedCell.innerHTML = '';
                    selectedCell.classList.remove('pencil-mode');
                }
            } else {
                // Normal mode - single number
                selectedCell.textContent = number;
                selectedCell.style.fontSize = '1.5rem';
                selectedCell.style.fontWeight = '600';
                selectedCell.classList.remove('pencil-mode');
                selectedCell.dataset.pencil = '';
            }
        }

        function clearCell() {
            if (!selectedCell) {
                alert('Please select a cell first!');
                return;
            }

            selectedCell.textContent = '';
            selectedCell.innerHTML = '';
            selectedCell.style.color = '';
            selectedCell.classList.remove('pencil-mode');
            selectedCell.dataset.pencil = '';
        }

        function renderWordSearch(container, puzzle) {
            const size = puzzle.grid.length;
            let html = `<div class="word-search-grid" style="grid-template-columns: repeat(${size}, 1fr);">`;

            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    html += `<div class="word-search-cell" data-row="${i}" data-col="${j}">${puzzle.grid[i][j]}</div>`;
                }
            }

            html += '</div>';
            html += '<div class="word-list">';
            puzzle.words.forEach(word => {
                html += `<div class="word-item" data-word="${word}">${word}</div>`;
            });
            html += '</div>';

            container.innerHTML = html;

            // Word search interaction
            let selecting = false;
            let selectedCells = [];

            document.querySelectorAll('.word-search-cell').forEach(cell => {
                cell.addEventListener('mousedown', startSelection);
                cell.addEventListener('mouseenter', continueSelection);
                cell.addEventListener('mouseup', endSelection);
            });

            function startSelection(e) {
                selecting = true;
                selectedCells = [e.target];
                e.target.classList.add('selected');
            }

            function continueSelection(e) {
                if (selecting && !e.target.classList.contains('found')) {
                    if (!selectedCells.includes(e.target)) {
                        selectedCells.push(e.target);
                        e.target.classList.add('selected');
                    }
                }
            }

            function endSelection() {
                if (selecting) {
                    checkWord();
                    selectedCells.forEach(cell => cell.classList.remove('selected'));
                    selectedCells = [];
                    selecting = false;
                }
            }

            function checkWord() {
                const word = selectedCells.map(cell => cell.textContent).join('');
                const reverseWord = word.split('').reverse().join('');

                puzzle.words.forEach(targetWord => {
                    if (word === targetWord || reverseWord === targetWord) {
                        selectedCells.forEach(cell => cell.classList.add('found'));
                        document.querySelector(`[data-word="${targetWord}"]`).classList.add('found');

                        // Check if all words found
                        if (document.querySelectorAll('.word-item.found').length === puzzle.words.length) {
                            document.getElementById('success-message').classList.add('show');
                        }
                    }
                });
            }
        }

        function renderCrossword(container, puzzle) {
            const size = puzzle.grid.length;
            let html = `<div class="crossword-grid" style="grid-template-columns: repeat(${size}, 1fr);">`;

            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    if (puzzle.grid[i][j] === '') {
                        html += '<div class="crossword-cell black"></div>';
                    } else {
                        html += `<div class="crossword-cell" data-row="${i}" data-col="${j}"><input type="text" maxlength="1"></div>`;
                    }
                }
            }

            html += '</div>';
            html += '<div class="clues">';
            html += '<div class="clue-section"><h3>Across</h3><ul class="clue-list">';
            puzzle.clues.across.forEach(clue => {
                html += `<li>${clue}</li>`;
            });
            html += '</ul></div>';
            html += '<div class="clue-section"><h3>Down</h3><ul class="clue-list">';
            puzzle.clues.down.forEach(clue => {
                html += `<li>${clue}</li>`;
            });
            html += '</ul></div></div>';
            html += '<div class="puzzle-controls">';
            html += '<button class="btn btn-primary" onclick="checkCrossword()">Check Solution</button>';
            html += '<button class="btn btn-secondary" onclick="resetPuzzle()">Reset</button>';
            html += '</div>';

            container.innerHTML = html;

            // Auto-advance to next cell
            document.querySelectorAll('.crossword-cell input').forEach((input, index, inputs) => {
                input.addEventListener('input', function(e) {
                    this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '');
                    if (this.value && index < inputs.length - 1) {
                        let nextIndex = index + 1;
                        while (nextIndex < inputs.length && !inputs[nextIndex].parentElement.classList.contains('crossword-cell')) {
                            nextIndex++;
                        }
                        if (nextIndex < inputs.length) {
                            inputs[nextIndex].focus();
                        }
                    }
                });
            });
        }

        function checkSudoku() {
            let correct = true;
            const cells = document.querySelectorAll('.sudoku-cell:not(.given)');

            cells.forEach(cell => {
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);
                const cellText = cell.textContent.trim();

                // Skip cells with pencil marks
                if (cell.classList.contains('pencil-mode')) {
                    correct = false;
                    return;
                }

                const value = parseInt(cellText);
                if (isNaN(value) || value !== todaysPuzzle.solution[row][col]) {
                    correct = false;
                    cell.style.color = '#d32f2f';
                } else {
                    cell.style.color = '#2e7d32';
                }
            });

            if (correct) {
                document.getElementById('success-message').classList.add('show');
            } else {
                alert('Some numbers are incorrect. Keep trying!');
            }
        }

        function checkCrossword() {
            let correct = true;
            document.querySelectorAll('.crossword-cell input').forEach(input => {
                const cell = input.parentElement;
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);

                if (input.value.toUpperCase() !== todaysPuzzle.grid[row][col]) {
                    correct = false;
                    input.style.color = '#d32f2f';
                } else {
                    input.style.color = '#2e7d32';
                }
            });

            if (correct) {
                document.getElementById('success-message').classList.add('show');
            }
        }

        function resetPuzzle() {
            // Reset sudoku cells
            document.querySelectorAll('.sudoku-cell:not(.given)').forEach(cell => {
                cell.textContent = '';
                cell.innerHTML = '';
                cell.style.color = '';
                cell.classList.remove('pencil-mode');
                cell.classList.remove('selected');
                cell.dataset.pencil = '';
            });

            // Clear selected cell
            selectedCell = null;

            // Reset crossword inputs
            document.querySelectorAll('.crossword-cell input').forEach(input => {
                input.value = '';
                input.style.color = '';
            });

            // Reset word search
            document.querySelectorAll('.found').forEach(el => el.classList.remove('found'));
            document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));

            document.getElementById('success-message').classList.remove('show');
        }

        // Initialize puzzle
        renderPuzzle();
    </script>
</body>
</html>
